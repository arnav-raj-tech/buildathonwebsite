<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Student Budget Buddy helps students track expenses, manage pocket money, and get smart financial advice.">
<title>Student Budget Buddy</title>

<!-- Google Fonts & Icons -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<!-- Firebase SDK -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDwmJ-6PWeD6x-5rjiWywsFMDlEFSSCsgc",
  authDomain: "student-budget-tracker-ac367.firebaseapp.com",
  projectId: "student-budget-tracker-ac367",
  storageBucket: "student-budget-tracker-ac367.appspot.com",
  messagingSenderId: "367537585165",
  appId: "1:367537585165:web:cb945c4d12cad3914ee944"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

async function authenticate(email, password) {
  try {
    await signInWithEmailAndPassword(auth, email, password);
    alert("Login successful!");
    document.getElementById('loginModal').style.display = 'none';
  } catch (loginErr) {
    try {
      await createUserWithEmailAndPassword(auth, email, password);
      alert("Account created successfully!");
      document.getElementById('loginModal').style.display = 'none';
    } catch (signErr) {
      alert(signErr.message);
    }
  }
}
window.authenticate = authenticate;

onAuthStateChanged(auth, user => {
  if(user){
    document.getElementById('loginBtn').style.display = 'none';
    document.getElementById('userEmail').innerText = user.email;
  } else {
    document.getElementById('loginBtn').style.display = 'inline-block';
    document.getElementById('userEmail').innerText = '';
  }
});
</script>

<style>
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #d2f5d2, #e6ffe6);
  color: #333;
}
header {
  background: #2e7d32;
  color: #fff;
  text-align: center;
  padding: 30px 10px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  position: relative;
}
header h1 { font-size: 2em; margin-bottom:5px; }
header p { font-size: 1.1em; }
#userEmail { position: absolute; top: 10px; right: 20px; font-size: 0.9em; color: #fff; }

nav {
  background: #1b5e20;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 15px;
  padding: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
nav a, #loginBtn {
  color: white;
  text-decoration: none;
  font-weight: 500;
  padding: 8px 15px;
  border-radius: 6px;
  transition: 0.3s ease;
  cursor: pointer;
}
nav a:hover, #loginBtn:hover { background: rgba(255,255,255,0.15); }

.container {
  text-align: center;
  padding: 40px 20px;
  max-width: 900px;
  margin: 0 auto;
}

.btn {
  background: #00a651;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 12px 25px;
  margin: 10px 5px;
  cursor: pointer;
  font-size: 1em;
  transition: 0.3s ease;
}
.btn:hover { background: #007f3f; }

/* Login Modal */
#loginModal {
  display: none;
  position: fixed;
  z-index: 9999;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background-color: rgba(0,0,0,0.5);
  justify-content: center;
  align-items: center;
}
#loginContent {
  background: #fff;
  padding: 30px;
  border-radius: 12px;
  width: 90%;
  max-width: 400px;
  text-align: center;
}
#loginContent input {
  width: 80%;
  padding: 10px;
  margin: 10px 0;
  border-radius: 6px;
  border: 1px solid #ccc;
}
#loginContent button {
  padding: 10px 20px;
  margin-top: 10px;
  border: none;
  border-radius: 6px;
  background: #43a047;
  color: white;
  cursor: pointer;
  transition: 0.3s ease;
}
#loginContent button:hover { background:#2e7d32; }

/* AI widget */
#aiWidget {
  background: #fff;
  padding: 20px;
  margin: 25px auto;
  border-radius: 12px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  max-width: 900px;
  text-align: left;
}
#aiWidget input, #aiWidget button {
  padding: 10px;
  margin: 5px 0;
  border-radius: 6px;
  border:1px solid #ccc;
}
#aiWidget button {
  background: #00a651;
  color:white;
  border:none;
  cursor:pointer;
}
#aiWidget button:hover { background:#007f3f; }

.video-container{
    position:relative;
    padding-bottom:56.25%;
    height:0;
    overflow:hidden;
    border-radius:12px;
    margin-top:20px;
    box-shadow:0 4px 12px rgba(0,0,0,0.2);
}
.video-container iframe{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
}

footer {
  text-align:center;
  padding:10px;
  background:#f1f1f1;
  color:#555;
  font-size:0.9em;
}
</style>
</head>

<body>

<header>
  <h1>ðŸŽ“ Student Budget Buddy</h1>
  <p>Track your spending & manage your pocket money smartly!</p>
  <div id="userEmail"></div>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="tracker.html">Expense Tracker</a>
  <a href="tips.html">Money Tips</a>
  <a href="https://forms.gle/PkAbSHMgfWDZM2jH8">Feedback</a>
  <a href="about.html">About Us</a>
  <div id="loginBtn" onclick="document.getElementById('loginModal').style.display='flex'">Login / Sign Up</div>
</nav>

<div class="container">
  <h2>Welcome!</h2>
  <p>Manage your pocket money, track expenses, and get AI-powered advice to save better.</p>
  <img src="https://static.wixstatic.com/media/bc172e_acb81131c2954d40af6884aeb2a2b130~mv2.jpg" alt="Student budgeting illustration">

  <div>
    <button class="btn" onclick="location.href='tracker.html'">Start Tracking Now</button>
    <button class="btn" onclick="location.href='tips.html'">View Money Tips</button>
  </div>

  <!-- Expense AI Widget -->
  <div id="aiWidget">
    <h3>Expense AI ðŸ¤–</h3>
    <p>Ask me about your expenses or get tips!</p>
    <input type="text" id="aiInput" placeholder="Type your question...">
    <button onclick="askAI()">Ask</button>
    <p id="aiResponse" style="margin-top:10px;"></p>
  </div>

  <!-- Video -->
  <h3>Watch this for more tips ðŸŽ¥</h3>
  <div class="video-container">
    <iframe src="https://www.youtube.com/embed/28FMPE2tH80" title="Money management tips for students" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  </div>
</div>

<!-- Login Modal -->
<div id="loginModal">
  <div id="loginContent">
    <h2>Login or Sign Up</h2>
    <input type="email" id="email" placeholder="Email" required>
    <input type="password" id="password" placeholder="Password" required>
    <br>
    <button onclick="authenticate(document.getElementById('email').value, document.getElementById('password').value)">Continue</button>
  </div>
</div>

<footer>
2025 Student Budget Buddy | Made for students ðŸ’¸ Contact us at studentbudgetbuddyhelp@gmail.com
</footer>

<script>
function localBotReply(text){
    const t = text.toLowerCase();
    const numMatch = text.match(/(\d+(\.\d+)?)/);

    // 50/30/20 calculation
    if((t.includes("calculate") || t.includes("50/30/20") || t.includes("50 30 20")) && numMatch){
        const amt = parseFloat(numMatch[1]);
        const needs = (amt * 0.5).toFixed(2);
        const wants = (amt * 0.3).toFixed(2);
        const save = (amt * 0.2).toFixed(2);
        return `ðŸ“Š According to 50/30/20 for â‚¹${amt}:\n- Needs (50%): â‚¹${needs}\n- Wants (30%): â‚¹${wants}\n- Savings (20%): â‚¹${save}`;
    }

    // Previous advice messages
    if(t.includes('hello')||t.includes('hi')) 
        return "Hi! I'm Expense AI. Tell me your monthly pocket money or ask for saving tips.";
    if(t.includes('save')||t.includes('saving')) 
        return "Use 50/30/20: 50% needs, 30% wants, 20% savings. Want me to calculate based on your amount?";
    if(t.includes('tips')||t.includes('advice')) 
        return "Track daily snacks, set weekly limits, avoid impulse buys. Ask me to suggest budget!";
    if(t.includes('budget')||t.includes('how much')) {
        if(numMatch){
            const amt = parseFloat(numMatch[1]);
            const needs = (amt*0.5).toFixed(2);
            const wants = (amt*0.3).toFixed(2);
            const save = (amt*0.2).toFixed(2);
            return `From â‚¹${amt}: Needs â‰ˆ â‚¹${needs}, Wants â‰ˆ â‚¹${wants}, Savings â‰ˆ â‚¹${save}`;
        } else return "Please tell me your monthly amount like 'â‚¹2000' or '2000'.";
    }
    if(t.includes('bye')||t.includes('thanks')) 
        return "You're welcome! Come back anytime ðŸ˜Š";

    // Fallback messages
    const fallback = [
        "I can help with budget calculations and saving tips. Try 'calculate 1500' or 'saving tips'.",
        "Ask: 'How should I split â‚¹2000?' or 'Give me student saving tips.'"
    ];
    return fallback[Math.floor(Math.random()*fallback.length)];
}

</script>

</body>
</html>

