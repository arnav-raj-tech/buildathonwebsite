<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Student Budget Buddy helps students track expenses, manage pocket money, and get smart financial advice.">
    <meta name="keywords" content="student, budget, expenses, finance, tracker, tips">
    <title>Student Budget Buddy</title>

    <!-- Google Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #d2f5d2, #e6ffe6);
            color: #333;
            transition: background 0.3s ease, color 0.3s ease;
        }

        header {
            background: #2e7d32;
            color: #fff;
            text-align: center;
            padding: 30px 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            animation: fadeIn 0.6s ease;
        }

        header h1 {
            font-size: 2em;
        }

        header p {
            font-size: 1.1em;
            margin-top: 5px;
        }

        nav {
            background: #1b5e20;
            display: flex;
            justify-content: center;
            gap: 30px;
            padding: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 15px;
            border-radius: 6px;
            transition: 0.3s ease;
        }

        nav a:hover {
            background: rgba(255,255,255,0.15);
        }

        .container {
            text-align: center;
            padding: 40px 20px;
        }

        .container h2 {
            font-size: 1.8em;
            margin-bottom: 15px;
            color: #2e7d32;
            animation: fadeInUp 0.8s ease;
        }

        .container p {
            font-size: 1.1em;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .container img {
            width: 80%;
            max-width: 500px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            margin-bottom: 25px;
        }

        .container img:hover {
            transform: scale(1.05);
        }

        .btn {
            background: #43a047;
            color: #fff;
            border: none;
            padding: 12px 30px;
            margin: 10px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #2e7d32;
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        footer {
            text-align: center;
            padding: 15px;
            background: #e8f5e9;
            color: #555;
            font-size: 14px;
        }

        /* Animations */
        @keyframes fadeIn {
            from {opacity: 0;}
            to {opacity:1;}
        }

        @keyframes fadeInUp {
            from {opacity: 0; transform: translateY(15px);}
            to {opacity:1; transform: translateY(0);}
        }

        /* AI Chat Widget */
        #ai-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 340px;
            background: #fff;
            border-radius: 14px;
            box-shadow: 0 6px 14px rgba(0,0,0,0.25);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            font-family: 'Segoe UI', Arial, sans-serif;
            z-index: 9999;
            animation: slideUp 0.5s ease;
        }

        #ai-header {
            background: linear-gradient(90deg, #43a047, #2e7d32);
            color: #fff;
            padding: 0.75rem 1rem;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
        }

        #ai-chat {
            display: none;
            flex-direction: column;
            max-height: 360px;
            overflow-y: auto;
            padding: 0.75rem;
            gap: 0.5rem;
            scroll-behavior: smooth;
        }

        #ai-input-container {
            display: none;
            border-top: 1px solid #ddd;
            background: #fafafa;
            align-items: center;
            padding: 0.5rem;
            gap: 0.5rem;
        }

        #ai-user-input {
            flex: 1;
            padding: 0.5rem 0.8rem;
            border: 1px solid #ccc;
            border-radius: 25px;
            outline: none;
        }

        #ai-send-btn {
            padding: 0.4rem 1rem;
            background: #43a047;
            color: #fff;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s ease;
        }

        #ai-send-btn:hover {
            background: #2e7d32;
        }

        .chat-msg {
            padding: 0.5rem 0.8rem;
            border-radius: 14px;
            max-width: 80%;
            word-break: break-word;
            margin-bottom: 6px;
            animation: fadeIn 0.3s ease;
        }

        .chat-user {
            align-self: flex-end;
            background: #43a047;
            color: #fff;
        }

        .chat-bot {
            align-self: flex-start;
            background: #e9e9ee;
            color: #000;
        }

        .typing-dots {
            display: flex;
            gap: 6px;
            align-self: flex-start;
        }

        .typing-dots span {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #999;
            animation: blink 1s infinite;
        }

        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes blink { 0%,80%,100% {opacity:0.2;} 40%{opacity:1;} }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Responsive */
        @media(max-width:600px) {
            #ai-widget { width: 90%; right:5%; bottom:10px; }
        }

    </style>
</head>
<body>
    <header>
        <h1>ðŸŽ“ Student Budget Buddy</h1>
        <p>Track your spending & manage your pocket money smartly!</p>
    </header>

    <nav>
        <a href="index.html">Home</a>
        <a href="tracker.html">Expense Tracker</a>
        <a href="tips.html">Money Tips</a>
        <a href="https://forms.gle/PkAbSHMgfWDZM2jH8">Feedback</a>
        <a href="about.html">About Us</a>
    </nav>

    <div class="container">
        <h2>Welcome!</h2>
        <p>Manage your pocket money, track expenses, and get AI-powered advice to save better.</p>
        <img src="https://static.wixstatic.com/media/bc172e_acb81131c2954d40af6884aeb2a2b130~mv2.jpg/v1/fill/w_740,h_440,al_c,q_80,enc_auto/bc172e_acb81131c2954d40af6884aeb2a2b130~mv2.jpg" alt="Student budgeting illustration">
        <br>
        <button class="btn" onclick="location.href='tracker.html'">Start Tracking Now</button>
        <button class="btn" onclick="location.href='tips.html'">View Money Tips</button>
    </div>

    <!-- AI Widget -->
    <div id="ai-widget" aria-live="polite">
        <div id="ai-header">ðŸ’¬ Expense AI</div>
        <div id="ai-chat" role="log" aria-atomic="false"></div>
        <div id="ai-input-container">
            <input id="ai-user-input" placeholder="Type a message..." />
            <button id="ai-send-btn">Send</button>
            <button id="ai-clear-btn" style="margin-left:10px;">Clear</button>
        </div>
    </div>

    <footer>2025 Student Budget Buddy | Made for students ðŸ’¸Contact us at studentbudgetbuddyhelp@gmail.com</footer>

    <script>
        const header = document.getElementById('ai-header');
        const chat = document.getElementById('ai-chat');
        const inputContainer = document.getElementById('ai-input-container');
        const input = document.getElementById('ai-user-input');
        const sendBtn = document.getElementById('ai-send-btn');
        const clearBtn = document.getElementById('ai-clear-btn');

        const STORAGE_KEY = 'expense_ai_chat_v2';
        if(localStorage.getItem(STORAGE_KEY)){
            chat.innerHTML = localStorage.getItem(STORAGE_KEY);
            chat.style.display = 'flex';
            inputContainer.style.display = 'flex';
        }

        header.addEventListener('click', ()=>{
            const open = chat.style.display==='flex';
            chat.style.display = open ? 'none':'flex';
            inputContainer.style.display = open?'none':'flex';
            if(!open) input.focus();
        });

        function appendMessage(text, sender='bot'){
            const div = document.createElement('div');
            div.className = 'chat-msg '+(sender==='user'?'chat-user':'chat-bot');
            div.textContent = text;
            chat.appendChild(div);
            chat.scrollTop = chat.scrollHeight;
            localStorage.setItem(STORAGE_KEY, chat.innerHTML);
        }

        function showTyping(){
            const d = document.createElement('div');
            d.id='ai-typing';
            d.className='typing-dots';
            d.innerHTML='<span></span><span></span><span></span>';
            chat.appendChild(d);
            chat.scrollTop = chat.scrollHeight;
        }

        function hideTyping(){ const ex = document.getElementById('ai-typing'); if(ex) ex.remove(); }

        function localBotReply(text){
            const t=text.toLowerCase();
            const numMatch = text.match(/(\d+(\.\d+)?)/);
            if(t.includes('hello')||t.includes('hi')) return "Hi! I'm Expense AI. Tell me your monthly pocket money or ask for saving tips.";
            if(t.includes('save')||t.includes('saving')) return "Use 50/30/20: 50% needs, 30% wants, 20% savings. Want me to calculate based on your amount?";
            if(t.includes('tips')||t.includes('advice')) return "Track daily snacks, set weekly limits, avoid impulse buys. Ask me to suggest budget!";
            if(t.includes('calculate')||t.includes('budget')||t.includes('how much')){
                if(numMatch){
                    const amt=parseFloat(numMatch[1]);
                    const needs=(amt*0.5).toFixed(2);
                    const wants=(amt*0.3).toFixed(2);
                    const save=(amt*0.2).toFixed(2);
                    return `From â‚¹${amt}: Needs â‰ˆ â‚¹${needs}, Wants â‰ˆ â‚¹${wants}, Savings â‰ˆ â‚¹${save}`;
                } else return "Please tell me your monthly amount like 'â‚¹2000' or '2000'.";
            }
            if(t.includes('bye')||t.includes('thanks')) return "You're welcome! Come back anytime ðŸ˜Š";
            const fallback=["I can help with budget calculations and saving tips. Try 'calculate 1500' or 'saving tips'.","Ask: 'How should I split â‚¹2000?' or 'Give me student saving tips.'"];
            return fallback[Math.floor(Math.random()*fallback.length)];
        }

        async function handleLocalReply(txt){
            showTyping();
            await new Promise(r=>setTimeout(r,700+Math.random()*800));
            hideTyping();
            appendMessage(localBotReply(txt),'bot');
        }

        let sending=false;
        async function sendMessage(){
            if(sending) return;
            const txt=input.value.trim();
            if(!txt) return;
            sending=true;
            appendMessage(txt,'user');
            input.value='';
            try{ await handleLocalReply(txt); } 
            catch(err){ hideTyping(); appendMessage("âš  Something went wrong.",'bot'); console.error(err); }
            sending=false;
        }

        sendBtn.addEventListener('click',sendMessage);
        input.addEventListener('keypress',e=>{ if(e.key==='Enter') sendMessage(); });
        clearBtn.addEventListener('click',()=>{ chat.innerHTML=''; localStorage.removeItem(STORAGE_KEY); alert('Chat cleared!'); });

        console.log('Expense AI initialized.');
    </script>
</body>
</html>

